<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <title>3.2.&nbsp;Advanced</title><link rel="stylesheet" type="text/css" href="css/docbook.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="user_documentation.html" title="K3 User Documentation"><link rel="up" href="ch03.html" title="Chapter&nbsp;3.&nbsp;Language Reference"><link rel="prev" href="ch03.html" title="Chapter&nbsp;3.&nbsp;Language Reference"><link rel="next" href="ch03s03.html" title="3.3.&nbsp;Replacing a method of the base class"><base xmlns:fo="http://www.w3.org/1999/XSL/Format" target="body"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3.2.&nbsp;Advanced</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch03.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;3.&nbsp;Language Reference</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ch03s03.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_advanced"></a>3.2.&nbsp;Advanced</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_extending_an_aspect_multi_inheritance"></a>3.2.1.&nbsp;Extending an aspect (multi inheritance)</h3></div></div></div><p>Even if Java allows only one inheritance via <span class="emphasis"><em>extends</em></span>.
When using EMF, it is legal to inherit from several class. The underlying framework will take care to implement a pattern using Interfaces.</p><p>Our aspects must also be able to deal  with that situation.</p><p>The <span class="strong"><strong>@Aspect</strong></span> annotation can then take a <span class="strong"><strong>with</strong></span> attribute to indicate this inheritance.</p><p>If the following ecore model and its java implementation, there is a multi-inheritance from Child class to 3 ParentX classes.</p><div class="figure"><a name="d0e704"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/multi-inheritance-base-diagram.png" alt="multi inheritance base diagram"></div></div><p class="title"><b>Figure&nbsp;3.2.&nbsp;Metamodel used as base for the multi inheritance example</b></p></div><br class="figure-break"><p>then, in order to correctly reflect these inheritances in the aspects, we will define the following.</p><pre class="programlisting"><i xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-comment" style="color: darkgreen">// [..]</i>

<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">static</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">extension</b> multiparents.Parent1.*
<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">static</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">extension</b> multiparents.Parent2.*
<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">static</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">extension</b> multiparents.Parent3.*
<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">import</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">static</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">extension</b> multiparents.Child.*

<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color: darkred">@Aspect(className=Parent1)</b> <a name="CO7-1"></a><span><img src="gfx/callouts/1.gif" alt="1" border="0"></span>
<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">class</b> Parent1Aspect {
   <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">void</b> someParent1Method(){
      <i xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-comment" style="color: darkgreen">// [..]</i>
   }
}
<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color: darkred">@Aspect(className=Parent2)</b>
<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">class</b> Parent2Aspect {
   <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">void</b> someParent2Method(){
      <i xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-comment" style="color: darkgreen">// [..]</i>
   }
}
<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color: darkred">@Aspect(className=Parent3)</b>
<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">class</b> Parent3Aspect {
   <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">void</b> someParent3Method(){
      <i xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-comment" style="color: darkgreen">// [..]</i>
   }
}

<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color: darkred">@Aspect(className=Child, with=#[ParentAspect2, ParentAspect3] )</b> <a name="CO7-2"></a><span><img src="gfx/callouts/2.gif" alt="2" border="0"></span>
<b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">class</b> ChildAspect <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">extends</b> Parent1Aspect{ <a name="CO7-3"></a><span><img src="gfx/callouts/3.gif" alt="3" border="0"></span>
   <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">def</b> <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">void</b> someMethod(){
      <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">_self</b>.someParent1Method()
      <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">_self</b>.someParent2Method()
      <b xmlns:fo="http://www.w3.org/1999/XSL/Format" class="hl-keyword" style="color:darkblue">_self</b>.someParent3Method()
   }
}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO7-1"><span><img src="gfx/callouts/1.gif" alt="1" border="0"></span></a> </p></td><td valign="top" align="left"><p>each parent defines its own aspects.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO7-2"><span><img src="gfx/callouts/2.gif" alt="2" border="0"></span></a> </p></td><td valign="top" align="left"><p>secondary aspect inheritances are added thanks to the <span class="strong"><strong>with</strong></span> attribute.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO7-3"><span><img src="gfx/callouts/3.gif" alt="3" border="0"></span></a> </p></td><td valign="top" align="left"><p>primary aspect inheritance is declared using the <span class="strong"><strong>extends</strong></span> keyword like a single inheritance.</p></td></tr></table></div><div class="figure"><a name="d0e739"></a><div class="figure-contents"><div class="mediaobject"><img src="./images/multi-inheritance-base_and_aspects-diagram.png" alt="multi inheritance base and aspects diagram"></div></div><p class="title"><b>Figure&nbsp;3.3.&nbsp;Multi inheritance example with aspects</b></p></div><br class="figure-break"><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Tip</h2><p xmlns="">The syntax <code class="literal">with=#[ParentAspect2, ParentAspect3]</code>  indicates that we create a list with 2 additional parents (in addition to the primary one that has been defined using the <span class="strong"><strong>extends</strong></span> keyword). If there is only one additional parent, then the following syntax will also work : <code class="literal">with=ParentAspect2</code></p></div><div xmlns="http://www.w3.org/1999/xhtml" xmlns:fo="http://www.w3.org/1999/XSL/Format" class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Important</h2><p xmlns="">When an ecore model defines an inheritance structure, the best practice is to fully reflect the structure in the aspects. Othewise, the dynamic dispatch may lead to non-intuitive behaviors.</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch03.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch03.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ch03s03.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;3.&nbsp;Language Reference&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="user_documentation.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;3.3.&nbsp;Replacing a method of the base class</td></tr></table></div></body></html>